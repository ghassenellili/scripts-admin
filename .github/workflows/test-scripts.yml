name: Test Scripts Bash

# D√©clencher le workflow √† chaque push ou pull request
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test-bash-scripts:
    name: V√©rifier les scripts Bash
    runs-on: ubuntu-latest
    
    steps:
      # √âtape 1 : R√©cup√©rer le code
      - name: Checkout du code
        uses: actions/checkout@v3
      
      # √âtape 2 : Afficher les fichiers
      - name: Lister les fichiers
        run: ls -la
      
      # √âtape 3 : V√©rifier la syntaxe des scripts
      - name: V√©rifier la syntaxe Bash
        run: |
          echo "üîç V√©rification de la syntaxe des scripts..."
          for script in *.sh; do
            if [ -f "$script" ]; then
              echo "V√©rification de $script..."
              bash -n "$script"
              if [ $? -eq 0 ]; then
                echo "‚úÖ $script : syntaxe correcte"
              else
                echo "‚ùå $script : erreur de syntaxe"
                exit 1
              fi
            fi
          done
          echo "‚úÖ Tous les scripts sont valides !"
      
      # √âtape 4 : V√©rifier les permissions
      - name: V√©rifier les permissions
        run: |
          echo "üîç V√©rification des permissions..."
          for script in *.sh; do
            if [ -f "$script" ]; then
              if [ -x "$script" ]; then
                echo "‚úÖ $script : ex√©cutable"
              else
                echo "‚ö†Ô∏è  $script : pas ex√©cutable"
              fi
            fi
          done
